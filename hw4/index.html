<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="format-detection" content="telephone=no">
    <title>Homework 4</title>
    <style>
        html, body, header, footer, figure,
        h1, h2, h3, ul, li, body, div, p, img {
            margin: 0;
            padding: 0;
            vertical-align: baseline;
            border: 0;
        }

        #main {
            width = 700px;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }

        table, th, td {
            border: 1px solid black;
        }

        img {
            height: 200px;
        }

    </style>
</head>

<body>
    <div id = "main">
        <h4>Enter URL for Airlines List XML File</h4>
        <form id="gettingURL">

            <input type="text" name="url" value="http://cs-server.usc.edu:45678/hw/hw4/airlinelist.xml"><br><br>

            <!-- <input type="submit" value="Submit" onclick="clicked()"> -->

        </form>
        <button onclick="loadXML('airlinelist.xml')">Submit Query</button>
        <table id="demo"></table>
    </div>

    <script type="text/javascript">
        var url = "";
        var xmlDoc;
        function clicked() {
            var x = document.getElementById("gettingURL");
            url = x.elements[0].value + "<br>";
        }


        function loadXML(url) {
            if (window.XMLHttpRequest) {
                // code for IE7+, Firefox, Chrome, Opera, Safari
                xmlhttp=new XMLHttpRequest();
            }
            else {
                // code for IE6, IE5
                xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.open("GET", url, false); //open, send, responseXML are
            xmlhttp.send(); //properties of XMLHTTPRequest
            xmlDoc=xmlhttp.responseXML;

            txt = "";
            /*
            airlines = xmlDoc.getElementsByTagName("Airline");
            for (i = 0; i<airlines.length; i++) {
                airline = airlines[i];
                airlineName = airline.childNodes[0];
                airlineValue = airlineName.nodeValue;
                //txt += airlineValue + "<br>";

                var tr = document.createElement("tr");
                var td = document.createElement("td");
                var textNode = document.createTextNode(airlineValue);
                td.appendChild(textNode);
                tr.appendChild(td);
                document.getElementById("demo").appendChild(tr);
            }


                */



            footb = xmlDoc.documentElement.childNodes;
            txt += "<tr><th>Airline</th><th>IATA</th><th>Hubs</th><th>Notes</th><th>HomePage</th><th>Plane</th></tr>";
            for (i = 0; i<footb.length; i++) {
                var footbNodeList = footb.item(i).childNodes;
                for (j = 0; j<footbNodeList.length; j++) {
                    //txt += footbNodeList.item(j).nodeName + " ";
                    var row = footbNodeList.item(j).childNodes;
                    txt += "<tr>";
                    for (k = 0; k<row.length; k++) {
                        if (row.item(k).nodeType  == 1) {

                            if (row.item(k).nodeName  == "Data") {
                                //txt += row.item(k).innerHTML + " DATA </br>";
                            }

                            else if (row.item(k).nodeName == "Airline") {
                                txt += "<td>" + row.item(k).innerHTML + " Airline </td>";
                            }
                            else if (row.item(k).nodeName == "IATA") {
                                txt += "<td>" + row.item(k).innerHTML + " IATA </td>";
                            }

                            else if (row.item(k).nodeName == "Hubs") {
                                var hubs = row.item(k).childNodes;
                                txt += "<td>";
                                for ( l=0; l<hubs.length; l++) {
                                    if (hubs.item(l).nodeName == "Hub") {
                                        txt +=  hubs.item(l).innerHTML + " </br> ";
                                    }

                                }
                                txt += "</td>";

                            }
                            else if (row.item(k).nodeName == "Notes") {
                                txt += "<td>" + row.item(k).innerHTML + " </td> ";

                            }
                            else if (row.item(k).nodeName == "HomePage") {
                                txt += "<td>" + row.item(k).innerHTML + " </td> ";
                            }
                            else if (row.item(k).nodeName == "Plane") {
                                txt += "<td><img src='" + row.item(k).innerHTML + "' alt = 'plane'></td>"
                                txt += "</tr>";
                                txt += "</br>";
                            }

                            else {
                                txt += "<h1>" + row.item(k).nodeName + "</h1>";
                            }

                        }


                    }
                    //airline = row.getElementsByTagName('Airline');
                    //txt += row.nodeType + " ";
                    //if (row.nodeName == "Row") {
                    //    txt += row.nodeName + " ";
                    //}
                }
            }





            //return xmlDoc;





            document.getElementById("demo").innerHTML = txt;
         }





        // ....... processing the document goes here
    </script>







































</body>
</html>
