<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.css" rel="stylesheet">

     <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
     <!-- Include all compiled plugins (below), or include individual files as needed -->
     <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
     <script>
     $(function(){
     $("#tabs a:first").tab('show');
     $('#result').hide();
       });
     </script>
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body>
      <div class="navbar navbar-default" role="navigation">
          <div class="row">
              <div class="col-lg-3">
                  <div class="navbar-header">
                      <a class="navbar-brand" class="text-primary" href="#"><p class="text-primary">FB Search</p></a>
                  </div>
              </div>
              <form class="navbar-form" role="search" id="searchForm">
                <div class="col-lg-6">
                  <div class="input-group"  style="width:100%">
                    <input type="text" id="keyword" class="form-control" placeholder="Search" name="keyword" required="requred">
                    <div class="input-group-btn" style="width:17%;">
                      <button id="searchButton" class="btn btn-primary" style="width:80%; background-color: #3B5998;"><span
                      class="glyphicon glyphicon-search"></span></button>
                    </div>
                    <div class="input-group-btn">
                      <button type="reset" class="btn btn-default"><span>Clear</span></button>
                    </div>
                  </div>
                </div>
              </form>
          </div>
      </div>
      </div>

      <div class="masthead">
        <nav>
          <ul class="nav nav-tabs" id="tabs">
            <li class="active"><a href="#" id="user" data-toggle="tab">Users</a></li>
            <li><a href="#" id="page" data-toggle="tab">Pages</a></li>
            <li><a href="#" id="event" data-toggle="tab">Events</a></li>
            <li><a href="#" id="place" data-toggle="tab">Places</a></li>
            <li><a href="#" id="group" data-toggle="tab">Groups</a></li>
            <li><a href="#" data-toggle="tab">Favorites</a></li>
          </ul>
        </nav>
      </div>

      <div class="container">
        <div class="container-fluid">
          <div id="result" class="row">
            <table class="table table-hover" id="resultsTable">
              <thead>
              </thead>
              <tbody>
              </tbody>
            </table>
            <div class="row">
              <div  class="text-center">
                <div class="col-md-4"></div>
                <div class="col-md-2">
                <p><button class="btn btn-secondary btn-block" disabled>Previous</button></p>
                </div>
                <div class="col-md-2">
                  <p><button class="btn btn-secondary btn-block">Next</button></p>
                </div>
                <div class="col-md-4"></div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="container">

  </body>

  <script type="text/javascript">
  function imgTag(url) {
    tag = "<img src='"+url+"' class='img-circle' alt='"+url+"' width='30px' height='30px'>";
    return tag;
  }

  function printResult(data) {
    $('#result').show();
    $('#resultsTable thead').empty();
    $('#resultsTable tbody').empty();
    $('#resultsTable thead').append("<tr><th>#</th><th>Profile photo</th><th>Name</th><th>Favorite</th><th>Details</th></tr>");
    var i;
    var favButton = '<button type="button" class="btn btn-secondary"><span class="glyphicon glyphicon-star-empty"></span></button>';
    var detButton = '<button type="button" class="btn btn-secondary"><span class="glyphicon glyphicon-chevron-right"></span></button>';
    for (i = 0; i < data['data'].length; ++i) {
        j = i+1;
        imgAttr = imgTag(data['data'][i]['picture']['data']['url']);
        $('#resultsTable tbody').append("<tr><td><span class='align-middle'>"+j+"</span></td><td>"+imgAttr+"</td><td>"+data['data'][i]['name']+"</td><td>"+favButton+"</td><td>"+detButton+"</td></tr>");
    }

    var next = data['paging']['next'];
    //alert(next);



  }


  $("#searchForm").submit(function(e) {
    e.preventDefault();
  });

  $('#searchButton').on('click', function () {
    var param = $('#keyword').val() + "&type=" + $("ul#tabs li.active a").attr("id");
      $.ajax({
        url: 'search.php?keyword='+param,
        dataType: 'json',
        type: 'GET',
        success: function (data) {
          //alert(data['data'][0]['picture']['data']['url']);
          printResult(data);
        },
        error: function(xhr, status, error) {
          alert(error);
        }
      });
    });
  </script>
</html>
